"use strict";(self.webpackChunkelement_web=self.webpackChunkelement_web||[]).push([[8316],{"../matrix-react-sdk/src/effects/spaceinvaders/index.ts":(t,e,i)=>{i.d(e,{default:()=>a});var s=i("../matrix-react-sdk/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=i("../matrix-react-sdk/src/utils/arrays.ts");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){(0,s.c)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}const c={maxCount:50,gravity:.005};class a{constructor(t){(0,s.c)(this,"options",void 0),(0,s.c)(this,"context",null),(0,s.c)(this,"particles",[]),(0,s.c)(this,"lastAnimationTime",0),(0,s.c)(this,"isRunning",!1),(0,s.c)(this,"start",(async(t,e=3e3)=>{if(!t)return;this.context=t.getContext("2d"),this.particles=[];const i=this.options.maxCount;for(;this.particles.length<i;)this.particles.push(this.resetParticle({},t.width,t.height));this.isRunning=!0,requestAnimationFrame(this.renderLoop),e&&window.setTimeout(this.stop,e)})),(0,s.c)(this,"stop",(async()=>{this.isRunning=!1})),(0,s.c)(this,"resetParticle",((t,e,i)=>(t.x=Math.random()*e,t.y=Math.random()*-i,t.xCol=t.x,t.gravity=this.options.gravity+6*Math.random()+4,t))),(0,s.c)(this,"renderLoop",(()=>{if(this.context&&this.context.canvas)if(0===this.particles.length)this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height);else{(Date.now()-this.lastAnimationTime>=15||!this.lastAnimationTime)&&(this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.lastAnimationTime=Date.now(),this.animateAndRenderInvaders()),requestAnimationFrame(this.renderLoop)}})),this.options=o(o({},c),t)}animateAndRenderInvaders(){if(this.context&&this.context.canvas){this.context.font="50px Twemoji";for(const t of(0,n.ie)(this.particles))t.y+=t.gravity,this.context.save(),this.context.fillText("ðŸ‘¾",t.x,t.y),this.context.restore()}}}}}]);
//# sourceMappingURL=8316.js.map