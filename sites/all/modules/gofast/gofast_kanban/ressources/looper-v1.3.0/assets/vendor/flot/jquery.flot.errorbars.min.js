!function(m){function e(r,e,n,i){if(e.points.errorbars){var o=[{x:!0,number:!0,required:!0},{y:!0,number:!0,required:!0}],a=e.points.errorbars;"x"!=a&&"xy"!=a||(e.points.xerr.asymmetric&&o.push({x:!0,number:!0,required:!0}),o.push({x:!0,number:!0,required:!0})),"y"!=a&&"xy"!=a||(e.points.yerr.asymmetric&&o.push({y:!0,number:!0,required:!0}),o.push({y:!0,number:!0,required:!0})),i.format=o}}function q(r,e){var n=r.datapoints.points,i=null,o=null,a=null,t=null,p=r.points.xerr,l=r.points.yerr,s=r.points.errorbars;"x"==s||"xy"==s?p.asymmetric?(i=n[e+2],o=n[e+3],"xy"==s&&(l.asymmetric?(a=n[e+4],t=n[e+5]):a=n[e+4])):(i=n[e+2],"xy"==s&&(l.asymmetric?(a=n[e+3],t=n[e+4]):a=n[e+3])):"y"==s&&(l.asymmetric?(a=n[e+2],t=n[e+3]):a=n[e+2]),null==o&&(o=i),null==t&&(t=a);var u=[i,o,a,t];return p.show||(u[0]=null,u[1]=null),l.show||(u[2]=null,u[3]=null),u}function S(r,e,n,i,o,a,t,p,l,s,u){i+=s,o+=s,a+=s,"x"==e.err?(n+l<o?c(r,[[o,i],[Math.max(n+l,u[0]),i]]):t=!1,a<n-l?c(r,[[Math.min(n-l,u[1]),i],[a,i]]):p=!1):(o<i-l?c(r,[[n,o],[n,Math.min(i-l,u[0])]]):t=!1,i+l<a?c(r,[[n,Math.max(i+l,u[1])],[n,a]]):p=!1),l=null!=e.radius?e.radius:l,t&&("-"==e.upperCap?"x"==e.err?c(r,[[o,i-l],[o,i+l]]):c(r,[[n-l,o],[n+l,o]]):m.isFunction(e.upperCap)&&("x"==e.err?e.upperCap(r,o,i,l):e.upperCap(r,n,o,l))),p&&("-"==e.lowerCap?"x"==e.err?c(r,[[a,i-l],[a,i+l]]):c(r,[[n-l,a],[n+l,a]]):m.isFunction(e.lowerCap)&&("x"==e.err?e.lowerCap(r,a,i,l):e.lowerCap(r,n,a,l)))}function c(r,e){r.beginPath(),r.moveTo(e[0][0],e[0][1]);for(var n=1;n<e.length;n++)r.lineTo(e[n][0],e[n][1]);r.stroke()}function n(r,n){var e=r.getPlotOffset();n.save(),n.translate(e.left,e.top),m.each(r.getData(),function(r,e){e.points.errorbars&&(e.points.xerr.show||e.points.yerr.show)&&function(r,e,n){var i=n.datapoints.points,o=n.datapoints.pointsize,a=[n.xaxis,n.yaxis],t=n.points.radius,p=[n.points.xerr,n.points.yerr],l=!1;if(a[0].p2c(a[0].max)<a[0].p2c(a[0].min)){l=!0;var s=p[0].lowerCap;p[0].lowerCap=p[0].upperCap,p[0].upperCap=s}var u=!1;if(a[1].p2c(a[1].min)<a[1].p2c(a[1].max)){u=!0;s=p[1].lowerCap;p[1].lowerCap=p[1].upperCap,p[1].upperCap=s}for(var m=0;m<n.datapoints.points.length;m+=o)for(var c=q(n,m),h=0;h<p.length;h++){var x=[a[h].min,a[h].max];if(c[h*p.length]){var y=i[m],d=i[m+1],f=[y,d][h]+c[h*p.length+1],w=[y,d][h]-c[h*p.length];if("x"==p[h].err&&(d>a[1].max||d<a[1].min||f<a[0].min||w>a[0].max))continue;if("y"==p[h].err&&(y>a[0].max||y<a[0].min||f<a[1].min||w>a[1].max))continue;var C=!0,v=!0;if(f>x[1]&&(C=!1,f=x[1]),w<x[0]&&(v=!1,w=x[0]),"x"==p[h].err&&l||"y"==p[h].err&&u){s=w;w=f,f=s,s=v,v=C,C=s,s=x[0],x[0]=x[1],x[1]=s}y=a[0].p2c(y),d=a[1].p2c(d),f=a[h].p2c(f),w=a[h].p2c(w),x[0]=a[h].p2c(x[0]),x[1]=a[h].p2c(x[1]);var b=p[h].lineWidth?p[h].lineWidth:n.points.lineWidth,g=null!=n.points.shadowSize?n.points.shadowSize:n.shadowSize;if(0<b&&0<g){var k=g/2;e.lineWidth=k,e.strokeStyle="rgba(0,0,0,0.1)",S(e,p[h],y,d,f,w,C,v,t,k+k/2,x),e.strokeStyle="rgba(0,0,0,0.2)",S(e,p[h],y,d,f,w,C,v,t,k/2,x)}e.strokeStyle=p[h].color?p[h].color:n.color,e.lineWidth=b,S(e,p[h],y,d,f,w,C,v,t,0,x)}}}(0,n,e)}),n.restore()}m.plot.plugins.push({init:function(r){r.hooks.processRawData.push(e),r.hooks.draw.push(n)},options:{series:{points:{errorbars:null,xerr:{err:"x",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null},yerr:{err:"y",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null}}}},name:"errorbars",version:"1.0"})}(jQuery);