#!/usr/bin/env node
!function(){"use strict";var p=require("path"),a=require(p.join(__dirname,"tmpl.js")),c=require("fs"),e=c.readFileSync(p.join(__dirname,"runtime.js"),"utf8"),u=/<script( id="([\w\-]+)")? type="text\/x-tmpl"( id="([\w\-]+)")?>([\s\S]+?)<\/script>/gi,n=new RegExp(a.helper.match(/\w+(?=\s*=\s*function\s*\()/g).join("\\s*\\(|")+"\\s*\\("),l=[];a.print=function(e){var t=n.test(e)?a.helper:"",r=e.replace(a.regexp,a.func);return(t||/_e\s*\(/.test(r))&&(t="_e=tmpl.encode"+t+","),"function("+a.arg+",tmpl){"+("var "+t+"_s='"+r+"';return _s;").split("_s+='';").join("")+"}"},process.argv.forEach(function(e,t){var r,n,i,s=l.length;if(1<t){if(!c.statSync(e).isFile())return;for(r=c.readFileSync(e,"utf8");n=u.exec(r);)i=n[2]||n[4],l.push("'"+i+"':"+a.print(n[5]));s===l.length&&(i=p.basename(e,p.extname(e)),l.push("'"+i+"':"+a.print(r)))}}),l.length&&e.replace("{}","{"+l.join(",")+"}")}();